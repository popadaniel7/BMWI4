#include "Pdc.h"
#include "TimH.h"
#include "time.h"

StdReturnType Pdc_ReadSensorValue()
{

	HAL_GPIO_WritePin(GPIOA, GPIO_PIN_2, GPIO_PIN_SET);
	__HAL_TIM_SET_COUNTER(&htim5, 0);
	while ((time_t)__HAL_TIM_GET_COUNTER (&htim5) < time);
	HAL_GPIO_WritePin(GPIOA, GPIO_PIN_2, GPIO_PIN_RESET);
	__HAL_TIM_ENABLE_IT(&htim5, TIM_IT_CC3);

	return E_OK;

}

StdReturnType Pdc_MainFunction()
{

	HAL_TIM_IC_Start_IT(&htim5, TIM_CHANNEL_3);
	Pdc_ReadSensorValue();

	return E_OK;

}
