#include "Std_Types.h"

#define DEMEVENT_POWER_ON_RESET 						0x0010
#define DEMEVENT_BROWN_OUT_RESET 						0x0011
#define DEMEVENT_SOFTWARE_RESET 						0x0012
#define DEMEVENT_WATCHDOG_RESET 						0x0013
#define DEMEVENT_LOW_POWER_RESET 						0x0014
#define DEMEVENT_BUTTON_RESET							0x0015
#define DEMEVENT_HARDWARE_RESET							0x0016
#define DEMEVENT_FLASH_FAULT_RESET						0x0017
#define DEMEVENT_NMI_RESET								0x0018
#define DEMEVENT_MEMORY_FAULT_RESET 					0x0019
#define DEMEVENT_USAGE_FAULT_RESET						0x0020
#define DEMEVENT_BUS_FAULT_RESET						0x0021
#define DEMEVENT_STACK_OVERFLOW_RESET 					0x0022
#define	DEMEVENT_MALLOC_FAILED_RESET 					0x0023
#define DEMEVENT_PVD_RESET								0x0024
#define DEMEVENT_I2C_FAULT_ERROR 						0x0030
#define DEMEVENT_SPI_FAULT_ERROR 						0x0031
#define DEMEVENT_ADC_FAULT_ERROR						0x0032
#define DEMEVENT_UART_FAULT_ERROR						0x0033
#define DEMEVENT_WATCHDOG_FAULT_ERROR					0x0034
#define DEMEVENT_TIMER_FAULT_ERROR						0x0035
#define DEMEVENT_MCP2515_FAULT							0x0036
#define DEMEVENT_EXTEEPROM_FAULT						0x0037
#define DEMEVENT_VIBRATIONSENSOR_FAULT					0x0038
#define DEMEVENT_LIGHTSENSOR_FAULT						0x0039
#define DEMEVENT_HC05_FAULT								0x0040
#define DEMEVENT_LOWBEAM_SHORTED						0x0050
#define DEMEVENT_LOWBEAM_UNDERVOLTAGE 					0x0070
#define DEMEVENT_HIGHBEAM_UNDERVOLTAGE 					0x0071
#define DEMEVENT_HIGHBEAM_SHORTED						0x0051
#define DEMEVENT_DAYTIMERUNNINGLIGHT_UNDERVOLTAGE 		0x0072
#define DEMEVENT_DAYTIMERUNNINGLIGHT_SHORTED 			0x0052
#define DEMEVENT_FRONTFOGLIGHT_UNDERVOLTAGE 			0x0073
#define DEMEVENT_FRONTFOGLIGHT_SHORTED 					0x0053
#define DEMEVENT_REARFOGLIGHT_UNDERVOLTAGE 				0x0074
#define DEMEVENT_REARFOGLIGHT_SHORTED 					0x0054
#define DEMEVENT_REARPOSITIONLIGHT_UNDERVOLTAGE 		0x0075
#define DEMEVENT_REARPOSITIONLIGHT_SHORTED	 			0x0055
#define DEMEVENT_RIGHTTURNSIGNAL_UNDERVOLTAGE 			0x0076
#define DEMEVENT_LEFTTURNSIGNAL_UNDERVOLTAGE 			0x0077
#define DEMEVENT_RIGHTTURNSIGNAL_SHORTED 				0x0056
#define DEMEVENT_LEFTTURNSIGNAL_SHORTED 				0x0057
#define DEMEVENT_REVERSELIGHT_UNDERVOLTAGE 				0x0078
#define DEMEVENT_REVERSELIGHT_SHORTED 					0x0058
#define DEMEVENT_INTERIORLIGHTS_UNDERVOLTAGE 			0x0079
#define DEMEVENT_INTERIORLIGHTS_SHORTED 				0x0059
#define DEMEVENT_DOORLED_UNDERVOLTAGE 					0x0079
#define DEMEVENT_DOORLED_SHORTED 						0x0060
#define DEMEVENT_LICENSEPLATELIGHT_UNDERVOLTAGE 		0x0080
#define DEMEVENT_LICENSEPLATELIGHT_SHORTED 				0x0061
#define DEMEVENT_ALARMLED_UNDERVOLTAGE 					0x0081
#define DEMEVENT_ALARMLED_SHORTED 						0x0062
#define DEMEVENT_CENTRALLOCKBUZZER_UNDERVOLTAGE 		0x0082
#define DEMEVENT_CENTRALLOCKBUZZER_SHORTED 				0x0063
#define DEMEVENT_ALARMBUZZER_UNDERVOLTAGE 				0x0083
#define DEMEVENT_ALARMBUZZER_SHORTED 					0x0064
#define DTC_SYSTEM_RESET 								0x0200
#define DTC_SYSTEM_FAULT 								0x0201
#define DTC_VIBRATION_SENSOR_FAULT 						0x0202
#define DTC_LIGHT_SENSOR_FAULT 							0x0203
#define DTC_BTC_FAULT 									0x0204
#define DTC_LOWBEAM_FAULT 								0x0205
#define DTC_HIGHBEAM_FAULT 								0x0206
#define DTC_DAYTIMERUNNINGLIGHT_FAULT 					0x0207
#define DTC_FRONTFOGLIGHT_FAULT	 						0x0208
#define DTC_REARFOGLIGHT_FAULT 							0x0209
#define DTC_REARPOSITIONLIGHT_FAULT 					0x0210
#define DTC_RIGHTTURNSIGNAL_FAULT 						0x0211
#define DTC_LEFTTURNSIGNAL_FAULT 						0x0212
#define DTC_REVERSELIGHT_FAULT 							0x0213
#define DTC_INTERIORLIGHTS_FAULT 						0x0214
#define DTC_DOORLED_FAULT 								0x0215
#define DTC_LICENSEPLATELIGHT_FAULT 					0x0216
#define DTC_ALARMLED_FAULT 								0x0217
#define DTC_CENTRALLOCKBUZZER_FAULT 					0x0218
#define DTC_ALARMBUZZER_FAULT 							0x0219
#define DTC_CONTEXT_EXTERNAL_FRONT_LIGHT_UNDERVOLTAGE 	DEMEVENT_LOWBEAM_UNDERVOLTAGE | DEMEVENT_HIGHBEAM_UNDERVOLTAGE | \
														DEMEVENT_DAYTIMERUNNINGLIGHT_UNDERVOLTAGE | DEMEVENT_FRONTFOGLIGHT_UNDERVOLTAGE | \
														DEMEVENT_RIGHTTURNSIGNAL_UNDERVOLTAGE | DEMEVENT_LEFTTURNSIGNAL_UNDERVOLTAGE ;
#define DTC_CONTEXT_EXTERNAL_REAR_LIGHT_UNDERVOLTAGE	DEMEVENT_REARFOGLIGHT_UNDERVOLTAGE | DEMEVENT_REARPOSITIONLIGHT_UNDERVOLTAGE | \
														DEMEVENT_REVERSELIGHT_UNDERVOLTAGE | DEMEVENT_LICENSEPLATELIGHT_UNDERVOLTAGE | \
#define DTC_CONTEXT_INTERIOR_LIGHT_UNDERVOLTAGE			DEMEVENT_DOORLED_UNDERVOLTAGE | DEMEVENT_ALARMLED_UNDERVOLTAGE | \
														DEMEVENT_INTERIORLIGHTS_UNDERVOLTAGE ;
#define DTC_CONTEXT_BUZZER_UNDERVOLTAGE					DEMEVENT_CENTRALLOCKBUZZER_UNDERVOLTAGE | DEMEVENT_ALARMBUZZER_UNDERVOLTAGE
#define DTC_CONTEXT_EXTERNAL_FRONT_LIGHT_SHORTED		DEMEVENT_LOWBEAM_SHORTED | DEMEVENT_HIGHBEAM_SHORTED | \
														DEMEVENT_DAYTIMERUNNINGLIGHT_SHORTED | DEMEVENT_FRONTFOGLIGHT_SHORTED | \
														DEMEVENT_RIGHTTURNSIGNAL_SHORTED | DEMEVENT_LEFTTURNSIGNAL_SHORTED ;
#define DTC_CONTEXT_EXTERNAL_REAR_LIGHT_SHORTED			DEMEVENT_REARFOGLIGHT_SHORTED | DEMEVENT_REARPOSITIONLIGHT_SHORTED | \
														DEMEVENT_REVERSELIGHT_SHORTED | DEMEVENT_LICENSEPLATELIGHT_SHORTED | ;
#define DTC_CONTEXT_INTERIOR_LIGHT_SHORTED				DEMEVENT_DOORLED_SHORTED | DEMEVENT_ALARMLED_SHORTED | \
														DEMEVENT_INTERIORLIGHTS_SHORTED ;
#define DTC_CONTEXT_BUZZER_SHORTED						DEMEVENT_CENTRALLOCKBUZZER_SHORTED | DEMEVENT_ALARMBUZZER_SHORTED
#define DTC_CONTEXT_HARD_RESET 							DEMEVENT_POWER_ON_RESET | DEMEVENT_WATCHDOG_RESET | \
														DEMEVENT_BROWN_OUT_RESET | DEMEVENT_LOW_POWER_RESET | \
														DEMEVENT_WATCHDOG_RESET ;
#define DTC_CONTEXT_SOFTWARE_RESET						DEMEVENT_SOFTWARE_RESET	| DEMEVENT_LOW_POWER_RESET | \
														DEMEVENT_NMI_RESET | DEMEVENT_FLASH_FAULT_RESET | \
														DEMEVENT_MEMORY_FAULT_RESET | DEMEVENT_USAGE_FAULT_RESET | \
														DEMEVENT_BUS_FAULT_RESET ;
#define DTC_CONTEXT_HARDWARE_RESET						DEMEVENT_HARDWARE_RESET | DEMEVENT_BUTTON_RESET
#define DTC_CONTEXT_PERIPHERAL_FAULT					DEMEVENT_I2C_FAULT_ERROR | DEMEVENT_SPI_FAULT_ERROR | \
														DEMEVENT_ADC_FAULT_ERROR | DEMEVENT_UART_FAULT_ERROR | \
														DEMEVENT_WATCHDOG_FAULT_ERROR | DEMEVENT_TIMER_FAULT_ERROR ;
#define DTC_CONTEXT_EXTERNAL_DRIVER_FAULT				DEMEVENT_MCP2515_FAULT | DEMEVENT_EXTEEPROM_FAULT | \
														DEMEVENT_VIBRATIONSENSOR_FAULT | DEMEVENT_LIGHTSENSOR_FAULT | \
														DEMEVENT_HC05_FAULT;
#define DTC_COUNT_SYSTEM_RESET 							0x0003
#define DTC_COUNT_SYSTEM_FAULT 							0x0001
#define DTC_COUNT_VIBRATION_SENSOR_FAULT 				0x0005
#define DTC_COUNT_LIGHT_SENSOR_FAULT 					0x0005
#define DTC_COUNT_BTC_FAULT 							0x0005
#define DTC_COUNT_LOWBEAM_FAULT 						0x0001
#define DTC_COUNT_HIGHBEAM_FAULT 						0x0001
#define DTC_COUNT_DAYTIMERUNNINGLIGHT_FAULT 			0x0001
#define DTC_COUNT_FRONTFOGLIGHT_FAULT	 				0x0001
#define DTC_COUNT_REARFOGLIGHT_FAULT 					0x0001
#define DTC_COUNT_REARPOSITIONLIGHT_FAULT 				0x0001
#define DTC_COUNT_RIGHTTURNSIGNAL_FAULT 				0x0001
#define DTC_COUNT_LEFTTURNSIGNAL_FAULT 				    0x0001
#define DTC_COUNT_REVERSELIGHT_FAULT 					0x0001
#define DTC_COUNT_INTERIORLIGHTS_FAULT 					0x0001
#define DTC_COUNT_DOORLED_FAULT 						0x0001
#define DTC_COUNT_LICENSEPLATELIGHT_FAULT 				0x0001
#define DTC_COUNT_ALARMLED_FAULT 						0x0005
#define DTC_COUNT_CENTRALLOCKBUZZER_FAULT 				0x0002
#define DTC_COUNT_ALARMBUZZER_FAULT 					0x0001
#define DTC_SEVERITY_LOW								0x0001
#define DTC_SEVERITY_MEDIUM								0x0002
#define DTC_SEVERITY_HIGH								0x0003
#define DTC_INTERVAL_RESET_INDEX_MIN					0
#define DTC_INTERVAL_RESET_INDEX_MAX					14
#define DTC_INTERVAL_I2C_INDEX_MIN						15
#define DTC_INTERVAL_I2C_INDEX_MAX						22
#define DTC_INTERVAL_SPI_INDEX_MIN						23
#define DTC_INTERVAL_SPI_INDEX_MAX						29
#define DTC_INTERVAL_ADC_INDEX_MIN						30
#define DTC_ITNERVAL_ADC_INDEX_MAX						32
#define DTC_INTERVAL_WATCHDOG_INDEX_MIN					33
#define DTC_INTERVAL_WATCHDOG_INDEX_MAX					33
#define DTC_INTERVAL_UART_INDEX_MIN						34
#define DTC_INTERVAL_UART_INDEX_MAX						38
#define DTC_INTERVAL_TIMER_INDEX_MIN					39
#define DTC_INTERVAL_TIMER_INDEX_MAX					44

EXTERN StdReturnType Dem_Init();
EXTERN StdReturnType Dem_DeInit();
EXTERN void Dem_MainFunction();
EXTERN void Dem_GetDtcInformation(uint32 dtcValue);
EXTERN void Dem_SetDtc(uint32 dtcValue);
EXTERN void Dem_ProcessDtc(uint32 dtcValue);
EXTERN void Dem_ClearDtc(uint32 dtcValue);
EXTERN void Dem_DtcFaultDetectionCounter(uint32 dtcValue);
